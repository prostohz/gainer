# Алгоритм определения линий поддержки и сопротивления

## Общий принцип работы

Класс `PriceLevels` анализирует исторические данные цен для выявления значимых уровней поддержки и сопротивления. Алгоритм учитывает данные с разных таймфреймов, придавая больший вес долгосрочным таймфреймам.

## Основные этапы алгоритма

1. **Поиск экстремальных точек**:

   - Анализ исторических данных для выявления локальных минимумов (поддержка) и максимумов (сопротивление)
   - Использование скользящего окна для определения экстремумов
   - Размер окна адаптируется к объему данных (примерно 0.5% от общего количества свечей)

2. **Группировка близких уровней**:

   - Объединение близких экстремумов в кластеры
   - Чувствительность кластеризации зависит от диапазона цен
   - Точки объединяются в кластер, если их цены отличаются не более чем на заданный порог

3. **Оценка силы уровня** по следующим факторам:

   - Частота тестирования: количество точек в кластере
   - Объем торгов: суммарный объем на уровне
   - Таймфрейм: более долгосрочные таймфреймы имеют больший вес
   - Сила нормализуется в диапазоне от 0 до 100

4. **Определение типа уровня**:
   - Поддержка: уровни ниже текущей цены
   - Сопротивление: уровни выше текущей цены

## Веса таймфреймов

Алгоритм применяет следующие веса к разным таймфреймам:

- 1 минута: 0.5
- 5 минут: 0.7
- 15 минут: 0.8
- 1 час: 1.0
- 4 часа: 1.2
- 1 день: 1.5
- 1 неделя: 2.0

## Формула расчета силы уровня

Сила уровня рассчитывается по формуле:
